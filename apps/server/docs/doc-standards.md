# 文档存储规范

本规范定义 `docs/` 目录下所有文档的组织结构、命名规则和管理流程。

---

## 一、目录结构

```
docs/
├── doc-standards.md              # 本规范文件
├── development-guidelines.md     # 开发规范（长期有效）
│
├── backlog/                      # 待办事项与评审记录
│   ├── README.md                 # backlog 索引
│   └── YYYY-MM-DD-<topic>.md     # 按日期+主题命名（kebab-case）
│
├── features/                     # 功能开发文档（归档）
│   └── YYYY-MM-DD-<feature>/     # 按日期+功能名创建目录（kebab-case）
│       ├── task.md               # 任务描述
│       ├── implementation-plan.md # 实现方案
│       └── ...                   # 其他相关文档
│
├── decisions/                    # 架构决策记录 (ADR)
│   └── NNNN-<决策标题>.md        # 按编号+标题命名
│
└── api/                          # API 文档（如有手写补充）
    └── ...
```

---

## 二、文件命名规范

### 2.1 通用规则

- **【强制】** 使用小写字母、数字、连字符 `-`，禁止空格和下划线（目录名除外）
- **【强制】** 日期格式统一为 `YYYY-MM-DD`
- **【强制】** 文件扩展名统一为 `.md`（Markdown）

### 2.2 各类文档命名

| 类型      | 格式                    | 示例                        |
| --------- | ----------------------- | --------------------------- |
| 规范类    | `kebab-case.md`         | `development-guidelines.md` |
| 待办/评审 | `YYYY-MM-DD-<topic>.md` | `2025-12-24-code-review.md` |
| 功能目录  | `YYYY-MM-DD-<feature>/` | `2025-12-23-feat-init/`     |
| 决策记录  | `NNNN-<决策标题>.md`    | `0001-use-prisma-orm.md`    |

---

## 三、待办事项 (backlog) 规范

### 3.1 目录说明

`docs/backlog/` 存放所有待办事项、代码评审结果、技术债务记录。

### 3.2 文件结构模板

```markdown
# <标题>

> 创建日期: YYYY-MM-DD
> 状态: 进行中 | 已完成 | 已归档
> 负责人: <可选>

## 概述

简要描述本待办清单的背景和目的。

## 待办事项

### Critical (P0)

- [ ] 任务描述 `位置`

### High (P1)

- [ ] 任务描述 `位置`

### Medium (P2)

- [ ] 任务描述 `位置`

### Low (P3)

- [ ] 任务描述 `位置`

## 完成记录

| 日期       | 事项 | 提交        |
| ---------- | ---- | ----------- |
| YYYY-MM-DD | 描述 | commit hash |

## 备注

补充说明。
```

### 3.3 状态流转

```
进行中 → 已完成 → 已归档
```

- **进行中**: 有未完成的待办事项
- **已完成**: 所有待办事项已完成，等待验收
- **已归档**: 验收通过，移入 `backlog/archive/` 目录（可选）

---

## 四、功能开发文档规范

### 4.1 目录说明

`docs/features/` 存放各功能的开发文档，按日期+功能名创建子目录。

### 4.2 标准文件清单

| 文件                     | 必须 | 说明               |
| ------------------------ | ---- | ------------------ |
| `task.md`                | 是   | 任务描述、需求来源 |
| `implementation-plan.md` | 是   | 技术方案、实现步骤 |
| `api.md`                 | 否   | API 接口设计       |
| `schema.md`              | 否   | 数据库设计         |
| `test_plan.md`           | 否   | 测试计划           |

### 4.3 历史目录迁移

现有 `features/2025-12-23-feat-init/` 目录保持不变，新功能文档统一放入 `features/` 子目录。

---

## 五、架构决策记录 (ADR)

### 5.1 目录说明

`docs/decisions/` 存放重要的架构决策记录，使用 ADR 格式。

### 5.2 文件模板

```markdown
# NNNN. 决策标题

日期: YYYY-MM-DD

## 状态

已接受 | 已废弃 | 已取代（被 NNNN 取代）

## 背景

描述问题背景和约束条件。

## 决策

描述做出的决策。

## 后果

描述决策带来的影响（正面和负面）。
```

### 5.3 编号规则

- 从 `0001` 开始递增
- 编号一旦分配不可复用
- 废弃的决策保留编号，状态标记为"已废弃"

---

## 六、索引文件维护

### 6.1 backlog/README.md

维护所有待办清单的索引：

```markdown
# Backlog 索引

| 日期       | 主题     | 状态   | 链接                                |
| ---------- | -------- | ------ | ----------------------------------- |
| 2025-12-24 | 代码评审 | 进行中 | [查看](./2025-12-24-code-review.md) |
```

### 6.2 features/README.md

维护所有功能文档的索引（同上格式）。

---

## 七、Git 提交规范

文档变更的提交信息格式：

```
docs(<scope>): <描述>

# 示例
docs(backlog): 添加代码评审待办清单
docs(guidelines): 更新 API 规范章节
docs(decisions): 添加 ADR-0001 Prisma ORM 决策
```

---

## 八、版本与归档

- **【推荐】** 已完成的 backlog 文档保留 6 个月后可移入 `backlog/archive/`
- **【推荐】** 功能文档长期保留，不归档
- **【强制】** 规范类文档变更需要在文档内记录变更历史

# 脚本上传 + 公开配置功能

> 创建日期: 2025-12-25
> 状态: 已完成

## 需求背景

### 场景一：油猴脚本跨设备共享

用户在 A 电脑使用油猴脚本监听小红书网页的 cookie，需要上传到服务端配置中心存储。
然后在 B 电脑通过油猴脚本下载这些 cookie 数据，实现跨设备共享登录态，避免重复登录。

**特点**：

- 油猴脚本无登录态，需要特殊认证机制
- 数据存储到配置中心的 `script-data` 命名空间

### 场景二：小程序/前端公开配置

某些配置需要匿名可读，例如小程序首页模块配置。用户在未登录状态下首次进入小程序时，
仍需要读取这些公开配置来渲染页面。

**特点**：

- 无需任何认证即可读取
- 通过 `isPublic` 字段标记哪些配置可公开访问

## 功能需求

### 脚本数据接口

| 接口                       | 方法 | 认证           | 说明             |
| -------------------------- | ---- | -------------- | ---------------- |
| `/v1/script/upload`        | POST | X-Script-Token | 上传脚本数据     |
| `/v1/script/download/:key` | GET  | X-Script-Token | 下载脚本数据     |
| `/v1/script/list`          | GET  | X-Script-Token | 列出所有脚本数据 |

### 公开配置接口

| 接口                                | 方法 | 认证 | 说明         |
| ----------------------------------- | ---- | ---- | ------------ |
| `/v1/config/public/:namespace/:key` | GET  | 无   | 获取公开配置 |

## 确认的配置

- 脚本数据不需要加密存储
- 脚本命名空间：`script-data`
- 不需要 IP 白名单
- 公开配置粒度：配置项级别（`isPublic` 字段）

export const SUCCESS_CODE = 0;

/**
 * 业务错误码约定：
 * - 0: 成功
 * - 10000-10999: 通用协议错误（鉴权/参数/幂等）
 * - 11000-11999: Auth 域
 * - 12000-12999: User/Role/Permission 域
 * - 13000-13999: Dictionary 域
 * - 14000-14999: Config Center 域
 * - 15000-15999: Script Upload 域
 * - 16000-16999: Navigation 域
 * - 17000-17999: 小红书模块
 * - 20000-20999: 系统/依赖错误（DB/Redis/外部调用）
 *
 * 注意：
 * - HTTP Status 仍然保持语义正确（400/401/403/404/409/500...）
 * - code 用于更细粒度的错误分类与前端精细化处理
 */
export const ApiErrorCode = {
  // 10000-10999: 通用协议错误
  BAD_REQUEST: 10001,
  UNAUTHORIZED: 10002,
  FORBIDDEN: 10003,
  NOT_FOUND: 10004,
  CONFLICT: 10005,
  TOO_MANY_REQUESTS: 10006,
  IDEMPOTENCY_KEY_MISSING: 10007,
  IDEMPOTENCY_IN_PROGRESS: 10008,
  IDEMPOTENCY_REQUIRES_AUTH: 10009,
  VALIDATION_ERROR: 10010,

  // 11000-11999: Auth 域
  AUTH_INVALID_CREDENTIALS: 11001,
  AUTH_EMAIL_EXISTS: 11002,
  AUTH_INVALID_TOKEN: 11003,
  AUTH_TOKEN_EXPIRED: 11004,
  AUTH_USER_NOT_FOUND: 11005,
  AUTH_USER_DISABLED: 11006,
  AUTH_REFRESH_TOKEN_INVALID: 11007,
  AUTH_REFRESH_TOKEN_EXPIRED: 11008,
  AUTH_PHONE_CODE_EXPIRED: 11010,
  AUTH_PHONE_CODE_INVALID: 11011,
  AUTH_PHONE_RATE_LIMITED: 11012,
  AUTH_WECHAT_CODE_INVALID: 11020,
  AUTH_WECHAT_STATE_EXPIRED: 11021,
  AUTH_IDENTITY_ALREADY_BOUND: 11030,
  AUTH_IDENTITY_NOT_FOUND: 11031,
  AUTH_IDENTITY_LAST_ONE: 11032,

  // 12000-12999: User/Role/Permission 域
  USER_NOT_FOUND: 12001,
  USER_ALREADY_EXISTS: 12002,
  USER_DELETED: 12003,
  ROLE_NOT_FOUND: 12010,
  ROLE_SYSTEM_IMMUTABLE: 12011,
  ROLE_ALREADY_ASSIGNED: 12012,
  PERMISSION_NOT_FOUND: 12020,
  PERMISSION_ALREADY_ASSIGNED: 12021,

  // 13000-13999: Dictionary 域
  DICT_NOT_FOUND: 13001,
  DICT_KEY_EXISTS: 13002,
  DICT_TYPE_INVALID: 13003,

  // 14000-14999: Config Center 域

  // 命名空间相关 (140xx)
  CONFIG_NAMESPACE_NOT_FOUND: 14000,
  CONFIG_NAMESPACE_EXISTS: 14001,
  CONFIG_NAMESPACE_HAS_ITEMS: 14002,

  // 配置项相关 (141xx)
  CONFIG_ITEM_NOT_FOUND: 14010,
  CONFIG_ITEM_EXISTS: 14011,
  CONFIG_SCHEMA_VALIDATION_FAILED: 14012,
  CONFIG_SCHEMA_INVALID: 14013,
  CONFIG_ENCRYPTION_FAILED: 14014,
  CONFIG_DECRYPTION_FAILED: 14015,

  // 版本相关 (142xx)
  CONFIG_VERSION_NOT_FOUND: 14020,
  CONFIG_ROLLBACK_FAILED: 14021,

  // 15000-15999: Script Upload 域
  SCRIPT_FEATURE_DISABLED: 15001,
  SCRIPT_TOKEN_MISSING: 15002,
  SCRIPT_TOKEN_INVALID: 15003,
  SCRIPT_DATA_NOT_FOUND: 15004,

  // 16000-16999: Navigation 域

  // 分组相关 (160xx)
  NAV_GROUP_NOT_FOUND: 16001,
  NAV_GROUP_CODE_EXISTS: 16002,
  NAV_GROUP_NOT_OWNER: 16003,
  NAV_GROUP_HAS_ITEMS: 16004, // 删除分组时存在导航项

  // 导航项相关 (161xx)
  NAV_ITEM_NOT_FOUND: 16010,
  NAV_ITEM_NOT_OWNER: 16011,
  NAV_ITEM_INVALID_GROUP: 16012, // 导航项所属分组不匹配

  // 17000-17999: 小红书模块

  // 认证相关 (170xx)
  XHS_ACCOUNT_NOT_FOUND: 17000, // 账号未配置
  XHS_AUTH_EXPIRED: 17001, // Cookie 已过期
  XHS_AUTH_INVALID: 17002, // Cookie 无效

  // API 请求相关 (171xx)
  XHS_API_ERROR: 17100, // 小红书接口返回错误
  XHS_REQUEST_FAILED: 17101, // 请求失败
  XHS_RATE_LIMITED: 17102, // 请求频率限制

  // 同步相关 (172xx)
  XHS_SYNC_IN_PROGRESS: 17200, // 同步进行中
  XHS_SYNC_FAILED: 17201, // 同步失败

  // 20000-20999: 系统/依赖错误
  INTERNAL_ERROR: 20000,
  DATABASE_ERROR: 20001,
  REDIS_ERROR: 20002,
  EXTERNAL_SERVICE_ERROR: 20003,
  SERVICE_UNAVAILABLE: 20004,

  // 20010-20029: 数据库细分错误
  DB_FOREIGN_KEY_VIOLATION: 20010,
  DB_INVALID_VALUE: 20011,
  DB_VALUE_OUT_OF_RANGE: 20012,
  DB_RELATION_VIOLATION: 20013,
  DB_INPUT_ERROR: 20014,
} as const;

export type ApiErrorCode = (typeof ApiErrorCode)[keyof typeof ApiErrorCode];
